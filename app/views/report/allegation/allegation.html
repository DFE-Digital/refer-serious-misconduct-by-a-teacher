{% extends "layouts/main.html" %}
{% set title = "Description of what happened" if isPublic else "How do you want to tell us about your allegation?" %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "/report/"
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
      <form method="post">
        {% set textarea %}
          {{ govukTextarea({
            id: "[report][allegation][allegation]",
            name: "[report][allegation][allegation]",
            label: {
              text: title if isPublic else "Details of the allegation",
              classes: "govuk-label--xl govuk-!-margin-top-6" if isPublic else "govuk-label--m govuk-!-margin-top-6",
              isPageHeading: isPublic
            },
            rows: 20
          }) }}
        {% endset %}

        {% set fileUpload %}
          {{ govukFileUpload({
            id: "[report][allegation][allegation-file]",
            name: "[report][allegation][allegation-file]",
            label: {
              text: "Upload allegation details",
              classes: "govuk-label--s"
            }
          }) }}
        {% endset %}

        {% if isPublic %}
          {{ textarea | safe }}
        {% else %}
          {{ govukRadios({
            id: "[report][allegation][how-tell]",
            name: "[report][allegation][how-tell]",
            fieldset: {
              legend: {
                classes: "govuk-fieldset__legend--xl",
                isPageHeading: true,
                text: title
              }
            },
            items: [
              {
                text: "I’ll upload the allegation details",
                value: "upload",
                conditional: {
                  html: fileUpload
                }
              },
              {
                text: "I’ll give details of the allegation",
                value: "describe",
                conditional: {
                  html: textarea
                }
              },
              {
                text: "I’ll do this later",
                value: "later"
              }
            ]
          }) }}
        {% endif %}

        {{ govukButton({
          text: "Save and continue"
        }) }}
      </form>
    </div>
  </div>
{% endblock %}
