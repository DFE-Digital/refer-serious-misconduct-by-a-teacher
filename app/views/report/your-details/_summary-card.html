
{% if data.report['your-details'].firstName or data.report['your-details'].lastName %}
  {% set name = data.report['your-details'].firstName + ' ' + data.report['your-details'].lastName %}
{% endif %}

{% if data.report['your-details']['job-title'] %}
  {% set jobTitle = data.report['your-details']['job-title']  %}
{% endif %}

{% if data.report['your-details'].telephone %}
  {% set telephone = data.report['your-details'].telephone  %}
{% endif %}

{% set incomplete = false %}
{% if not name or (not jobTitle and not isPublic) or not telephone %}
  {% set incomplete = true %}
{% endif %}

{% if incomplete %}
  <div class="govuk-inset-text app-inset-text--incomplete-section {% if errorIsPersonalDetailsIncomplete %} app-inset-text--incomplete-section-error {% endif %}">
{% endif %}

{{ govukSummaryList({
  classes: "govuk-!-margin-bottom-6",
  rows: [
    {
      key: {
        text: "Your name"
      },
      value: {
        html: name
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/your-details/name"
        }]
      }
    } if name,
    {
      key: {
        text: "Your email address"
      },
      value: {
        html: data.report.email
      }
    },
    {
      key: {
        text: "Your job title"
      },
      value: {
        html: jobTitle
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/your-details/job-title"
        }]
      }
    } if jobTitle and not isPublic,
    {
      key: {
        text: "Your phone number"
      },
      value: {
        html: telephone
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/your-details/telephone"
        }]
      }
    } if telephone
  ]
}) }}




{% if incomplete %}
  {% if not name %}
    {% set url = '/report/your-details/name' %}
  {% elseif not jobTitle and not isPublic %}
    {% set url = '/report/your-details/job-title' %}
  {% elseif not telephone %}
    {% set url = '/report/your-details/telephone' %}
  {% endif %}

  <p class="app-instruction-text">You must complete your details before you can send your referrals.</p>
  {{ govukButton({
    text: "Complete your details",
    href: url
  }) }}
{% endif %}

{% if incomplete %}
  </div>
{% endif %}