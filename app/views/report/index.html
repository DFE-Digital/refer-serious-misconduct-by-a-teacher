{% extends "layouts/main.html" %}
{% set title = "Your allegation of serious misconduct" %}
{% set buttonText = "Review and send" %}
{% block pageNavigation %}{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
      <h1 class="govuk-heading-xl">{{ title }}</h1>

      {% if data.report['your-details']['section-completed'] %}
        {% set yourDetailsHref = '/report/your-details/check-answers' %}
        {% set yourDetailsStatus = data.report['your-details']['section-completed'] %}
        {% if data.report['your-details']['section-completed'] == 'completed' %}
          {% set yourDetailsTagColour = 'bluex' %}
        {% endif %}
      {% endif %}

      {% if data.report['your-organisation']['section-completed'] %}
        {% set yourOrganisationHref = '/report/your-organisation/check-answers' %}
        {% set yourOrganisationStatus = data.report['your-organisation']['section-completed'] %}
        {% if data.report['your-organisation']['section-completed'] == 'completed' %}
          {% set yourOrganisationTagColour = 'bluex' %}
        {% endif %}
      {% endif %}

      {% if data.report['teacher-details']['section-completed'] %}
        {% set teacherHref = '/report/teacher/check-answers' %}
        {% set teacherStatus = data.report['teacher-details']['section-completed'] %}
        {% if data.report['teacher-details']['section-completed'] == 'completed' %}
          {% set teacherTagColour = 'bluex' %}
        {% endif %}
      {% endif %}

      {% if data.report['teacher-contact-details']['section-completed'] %}
        {% set teacherContactDetailsHref = '/report/teacher/check-answers' %}
        {% set teacherContactDetailsStatus = data.report['teacher-contact-details']['section-completed'] %}
        {% if data.report['teacher-contact-details']['section-completed'] == 'completed' %}
          {% set teacherContactDetailsTagColour = 'bluex' %}
        {% endif %}
      {% endif %}

      {% if data.report['teacher-role']['section-completed'] %}
        {% set teacherRoleHref = '/report/teacher-role/check-answers' %}
        {% set teacherRoleStatus = data.report['teacher-role']['section-completed'] %}
        {% if data.report['teacher-role']['section-completed'] == 'completed' %}
          {% set teacherRoleTagColour = 'bluex' %}
        {% endif %}
      {% endif %}


      {{ appTaskList({
        sections: [{
          titleText: "About you",
          items: [{
            text: "Your details",
            href: yourDetailsHref or '/report/your-details/name',
            tag: {
              colour: yourDetailsTagColour or 'grey',
              text: yourDetailsStatus or 'Not started yet'
            }
          }, {
            text: "Your organisation",
            href: yourOrganisationHref or '/report/your-organisation/name',
            tag: {
              colour: yourOrganisationTagColour or 'grey',
              text: yourOrganisationStatus or 'Not started yet'
            }
          }] if isEmployer else [{
            text: "Your details",
            href: yourDetailsHref or '/report/your-details/dont-worry',
            tag: {
              colour: yourDetailsTagColour or 'grey',
              text: yourDetailsStatus or 'Not started yet'
            }
          }]
        }, {
          titleText: "About the person you are referring",
          items: [{
            text: "Personal details",
            href: teacherHref or '/report/teacher/name',
            tag: {
              colour: teacherTagColour or 'grey',
              text: teacherStatus or 'Not started yet'
            }
          }, {
            text: "Contact details",
            href: teacherContactDetailsHref or '/report/teacher-contact-details/email',
            tag: {
              colour: teacherContactDetailsTagColour or 'grey',
              text: teacherContactDetailsStatus or 'Not started yet'
            }
          }, {
            text: "About their role",
            href: teacherRoleHref or '/report/teacher-role/start-date',
            tag: {
              colour: teacherRoleTagColour or 'grey',
              text: teacherRoleStatus or 'Not started yet'
            }
          }]
        }, {
          titleText: "The allegation",
          items: [{
            text: "Details of the allegation",
            href: '#',
            tag: {
              colour: 'grey',
              text: 'Not started yet'
            }
          }, {
            text: "Previous allegations",
            href: '#',
            tag: {
              colour: 'grey',
              text: 'Not started yet'
            }
          }, {
            text: "Evidence and supporting information",
            href: '#',
            tag: {
              colour: 'grey',
              text: 'Not started yet'
            }
          }] if isEmployer else [{
            text: "Details of the allegation",
            href: '#',
            tag: {
              colour: 'grey',
              text: 'Not started yet'
            }
          }, {
            text: "Evidence and supporting information",
            href: '#',
            tag: {
              colour: 'grey',
              text: 'Not started yet'
            }
          }]
        }]
      }) }}

      {% set html %}
        <p>
          You can delete your draft:<br />
          <a href="/report/delete">Delete your draft referral</a>
        </p>
        <p>
          Drafts are automatically deleted after 6 months of no activity. We’ll send you an email before deleting it.
        </p>
      {% endset %}

      <form method="post">
        {{ govukButton({
          text: "Review and send"
        }) }}
      </form>

      {{ govukDetails({
        summaryText: "I don’t want to continue",
        html: html
      }) }}
    </div>
  </div>
{% endblock %}

