{% extends "layouts/main.html" %}
{% set whereDidTheyWorkTitle = "Where did they work?" if hasLeftJob else "Where do they work?" %}
{% set title = whereDidTheyWorkTitle if isPublic else ("Did they" if hasLeftJob else "Do they") + " work in the same organisation as you?" %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "/report/teacher-role/job-title"
  }) }}
{% endblock %}


{% if data.report['teacher-role']['your-organisation.name'] %}
  {% set organisationName = "(" + data.report['teacher-role']['your-organisation.name'] + ")" %}
{% else %}
  {% set organisationName = "" %}
{% endif %}


{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
      <form method="post">
        {% set where %}
          {% if isPublic %}
            <h1 class="govuk-heading-xl">{{ title }}</h1>
          {% else %}
            <h2 class="govuk-heading-m">{{ whereDidTheyWorkTitle }}</h2>
          {% endif %}

          {{ govukInput({
            id: "[report][teacher-role][school][address][name]",
            name: "[report][teacher-role][school][address][name]",
            label: {
              text: "School name",
              classes: "govuk-label--s" if isPublic else "govuk-label--s"
            }
          }) }}

          {% call govukFieldset({
            legend: {
              text: "School address",
              classes: "govuk-fieldset__legend--m govuk-!-padding-top-6" if isPublic else "govuk-fieldset__legend--s govuk-!-padding-top-6"
            }
          }) %}
            {{ govukInput({
              id: "[report][teacher-role][school][address][line-1]",
              name: "[report][teacher-role][school][address][line-1]",
              label: {
                text: 'Address line 1'
              },
              autocomplete: "address-line1"
            }) }}

            {{ govukInput({
              id: "[report][teacher-role][school][address][line-2]",
              name: "[report][teacher-role][school][address][line-2]",
              label: {
                text: 'Address line 2 (optional)'
              },
              autocomplete: "address-line2"
            }) }}

            {{ govukInput({
              id: "[report][teacher-role][school][address][town]",
              name: "[report][teacher-role][school][address][town]",
              label: {
                text: "Town or city"
              },
              classes: "govuk-!-width-two-thirds",
              autocomplete: "address-level2"
            }) }}

            {{ govukInput({
              id: "[report][teacher-role][school][address][postcode]",
              name: "[report][teacher-role][school][address][postcode]",
              label: {
                text: "Postcode"
              },
              classes: "govuk-input--width-10",
              autocomplete: "postal-code"
            }) }}
          {% endcall %}
        {% endset %}

          {% if isEmployer %}
            {{ govukRadios({
              id: "[report][teacher-role][same-organisation]",
              name: "[report][teacher-role][same-organisation]",
              fieldset: {
                legend: {
                  classes: "govuk-fieldset__legend--xl govuk-!-margin-bottom-6",
                  isPageHeading: true,
                  text: title
                }
              },
              items: [
                {
                  text: "Yes, in the same organisation as me " + organisationName,
                  value: "same"
                },
                {
                  text: "No, in a different organisation",
                  value: "different",
                  conditional: {
                    html: where
                  }
                }
              ]
            }) }}
          {% else %}
            {{ where | safe }}
          {% endif %}
        {{ govukButton({
          text: "Save and continue"
        }) }}
      </form>
    </div>
  </div>
{% endblock %}
