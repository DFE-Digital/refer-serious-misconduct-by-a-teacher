{%- set address -%}
  {{appFormattedAddress({
    name: data.report.teacherRole.organisation.name,
    line1: data.report.teacherRole.organisation.address.line1,
    line2: data.report.teacherRole.organisation.address.line2,
    town: data.report.teacherRole.organisation.address.town,
    postcode: data.report.teacherRole.organisation.address.postcode,
    country: data.report.teacherRole.organisation.address.country
  })}}
{%- endset -%}

{% set newOrgAddress %}
  {{appFormattedAddress({
    name: data.report.teacherRole.newOrganisation.name,
    line1: data.report.teacherRole.newOrganisation.address.line1,
    line2: data.report.teacherRole.newOrganisation.address.line2,
    town: data.report.teacherRole.newOrganisation.address.town,
    postcode: data.report.teacherRole.newOrganisation.address.postcode,
    country: data.report.teacherRole.newOrganisation.address.country
  })}}
{% endset %}


{{ govukSummaryList({
  classes: "govuk-!-margin-bottom-6",
  titleText: "About their role",
  rows: [
    {
      key: {
        html: 'Their job title'
      },
      value: {
        html: data.report.teacherRole.jobTitle
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/job-title"
        }]
      }
    } if data.report.teacherRole.jobTitle,
    {
      key: {
        html: 'How do you want to give details about their main duties?'
      },
      value: {
        html: data.report.teacherRole.duties
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/duties"
        }]
      }
    },
    {
      key: {
        html: 'Description of their role'
      },
      value: {
        html: '<a href="#">job-description.pdf</a>'
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/duties"
        }]
      }
    } if data.report.teacherRole.duties == "Upload file",
    {
      key: {
        html: 'Description of their role'
      },
      value: {
        html: data.report.teacherRole.dutiesText
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/duties"
        }]
      }
    } if data.report.teacherRole.duties == 'Describe their main duties',
    {
      key: {
        html: 'Were they employed at the same organisation as you at the time of the alleged misconduct?'
      },
      value: {
        html: data.report.teacherRole.sameOrganisation
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/same-organisation"
        }]
      }
    } if data.report.teacherRole.sameOrganisation,
    {
      key: {
        html: 'Do you know the name and address of the organisation where the alleged misconduct took place?'
      },
      value: {
        html: data.report.teacherRole.knowWhereTheyWorked
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/know-where-they-worked"
        }]
      }
    } if data.report.teacherRole.sameOrganisation == 'No' or (not data.report.teacherRole.sameOrganisation and data.report.teacherRole.knowWhereTheyWorked),
    {
      key: {
        html: 'Name and address of the organisation where the alleged misconduct took place'
      },
      value: {
        html: address
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/where-they-worked"
        }]
      }
    } if data.report.teacherRole.knowWhereTheyWorked == 'Yes' and data.report.teacherRole.organisation,
    {
      key: {
        html: 'Do you know when they started their job?'
      },
      value: {
        html: data.report.teacherRole.knowJobStartDate
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/start-date"
        }]
      }
    } if data.report.teacherRole.knowJobStartDate,
    {
      key: {
        html: 'Job start date'
      },
      value: {
        html: data.report.teacherRole.jobStartDate | isoDateFromDateInput | date
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/start-date"
        }]
      }
    } if data.report.teacherRole.knowJobStartDate and data.report.teacherRole.knowJobStartDate == 'Yes',
    {
      key: {
        html: 'Are they still employed at the organisation where the alleged misconduct took place?'
      },
      value: {
        html: data.report.teacherRole.stillEmployed
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/still-employed"
        }]
      }
    } if data.report.teacherRole.stillEmployed,
    {
      key: {
        html: 'Do you know when they left the job?'
      },
      value: {
        html: data.report.teacherRole.knowWhenTheyLeft
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/end-date"
        }]
      }
    } if data.report.teacherRole.knowWhenTheyLeft,
    {
      key: {
        html: 'Job end date'
      },
      value: {
        html: data.report.teacherRole.jobEndDate | isoDateFromDateInput | date
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/end-date"
        }]
      }
    } if data.report.teacherRole.knowWhenTheyLeft == 'Yes',
    {
      key: {
        html: 'Reason they left the job'
      },
      value: {
        html: data.report.teacherRole.reasonForLeaving
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/reason-for-leaving"
        }]
      }
    } if data.report.teacherRole.reasonForLeaving,
    {
      key: {
        html: 'Are they employed somewhere else?'
      },
      value: {
        html: data.report.teacherRole.teachingElsewhere
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/teaching-somewhere-else"
        }]
      }
    } if data.report.teacherRole.teachingElsewhere,
    {
      key: {
        html: 'Do you know the name and address of the organisation where they’re employed?'
      },
      value: {
        html: data.report.teacherRole.knowWhereTheyWork
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/know-where-they-work"
        }]
      }
    } if data.report.teacherRole.knowWhereTheyWork,
    {
      key: {
        html: 'Name and address of the organisation where they’re employed'
      },
      value: {
        html: newOrgAddress
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/where-they-work"
        }]
      }
    } if data.report.teacherRole.knowWhereTheyWork == 'Yes'
  ]
}) }}