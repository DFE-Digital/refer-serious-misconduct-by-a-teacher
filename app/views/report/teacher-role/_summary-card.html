{% set address %}
  {{appFormattedAddress({
    name: data.report['teacher-role'].school.address.name,
    line1: data.report['teacher-role'].school.address.line1,
    line2: data.report['teacher-role'].school.address.line2,
    town: data.report['teacher-role'].school.address.town,
    postcode: data.report['teacher-role'].school.address.postcode,
    country: data.report['teacher-role'].school.address.country
  })}}
{% endset %}

{% set newOrgAddress %}
  {% set addressPath = 'report.teacher-role.other-employer.address' %}
  {{appFormattedAddress({
    line1: data.report['teacher-role']['other-employer'].address.line1,
    line2: data.report['teacher-role']['other-employer'].address.line2,
    town: data.report['teacher-role']['other-employer'].address.town,
    postcode: data.report['teacher-role']['other-employer'].address.postcode,
    country: data.report['teacher-role']['other-employer'].address.country
  })}}
{% endset %}

{{ appSummaryCard({
  classes: "govuk-!-margin-bottom-9",
  titleText: "About their role",
  rows: [
    {
      key: {
        html: 'Start date'
      },
      value: {
        html: data.report['teacher-role']['start-date'] | isoDateFromDateInput | date
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/start-date"
        }]
      }
    } if isEmployer,
    {
      key: {
        html: 'End date'
      },
      value: {
        html: data.report['teacher-role']['end-date'] | isoDateFromDateInput | date
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/end-date"
        }]
      }
    } if isEmployer and data.report['teacher-role']['still-employed'] == "No",
    {
      key: {
        html: 'How did they leave this job?'
      },
      value: {
        html: data.report['teacher-role']['how-end-job']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/end-date"
        }]
      }
    } if isEmployer and data.report['teacher-role']['still-employed'] == "No",
    {
      key: {
        html: 'Are they still employed in this job?'
      },
      value: {
        html: data.report['teacher-role']['still-employed']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/end-date"
        }]
      }
    } if isEmployer,
    {
      key: {
        html: 'Job title'
      },
      value: {
        html: data.report['teacher-role']['job-title']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/job-title"
        }]
      }
    } if data.report['teacher-role']['job-title'],
    {
      key: {
        html: 'Organisation'
      },
      value: {
        html: data.report['your-organisation']['name'] or "The same organisation as me"
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/school"
        }]
      }
    } if isEmployer,
    {
      key: {
        html: 'Organisation'
      },
      value: {
        html: address
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/school"
        }]
      }
    } if isPublic or data.report['teacher-role']['same-organisation'] == "different",
    {
      key: {
        html: 'Description of the work carried out by the person youâ€™re referring'
      },
      value: {
        html: data.report['teacher-role']['duties'] | nl2br
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/school"
        }]
      }
    } if isPublic or data.report['teacher-role']['how-tell-job'] == "describe",
    {
      key: {
        html: 'Main duties'
      },
      value: {
        html: '<a href="#">job-description.pdf</a>'
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/duties"
        }]
      }
    } if data.report['teacher-role']['how-tell-job'] == "upload",
    {
      key: {
        html: 'Main duties'
      },
      value: {
        html: '<span class="govuk-tag govuk-tag--grey">Incomplete</span>'
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/duties"
        }]
      }
    } if data.report['teacher-role']['how-tell-job'] == "later",
    {
      key: {
        html: 'Are they teaching somewhere else?'
      },
      value: {
        html: data.report['teacher-role']['teaching-elsewhere']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/teaching-somewhere-else"
        }]
      }
    } if hasLeftJob,
    {
      key: {
        html: 'Do you know where they are teaching?'
      },
      value: {
        html: data.report['teacher-role']['know-other-employer']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/teaching-where-now"
        }]
      }
    } if hasLeftJob and data.report['teacher-role']['teaching-elsewhere'] == "Yes",
    {
      key: {
        html: 'New employer'
      },
      value: {
        html: newOrgAddress
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/teaching-where-now"
        }]
      }
    } if hasLeftJob and data.report['teacher-role']['teaching-elsewhere'] == "Yes"
  ]
}) }}