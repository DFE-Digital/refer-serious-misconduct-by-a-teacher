{% set address %}
  {{appFormattedAddress({
    name: data.report.teacherRole.organisation.name,
    line1: data.report.teacherRole.organisation.address.line1,
    line2: data.report.teacherRole.organisation.address.line2,
    town: data.report.teacherRole.organisation.address.town,
    postcode: data.report.teacherRole.organisation.address.postcode,
    country: data.report.teacherRole.organisation.address.country
  })}}
{% endset %}

{% set newOrgAddress %}
  {{appFormattedAddress({
    name: data.report.teacherRole.newOrganisation.name,
    line1: data.report.teacherRole.newOrganisation.address.line1,
    line2: data.report.teacherRole.newOrganisation.address.line2,
    town: data.report.teacherRole.newOrganisation.address.town,
    postcode: data.report.teacherRole.newOrganisation.address.postcode,
    country: data.report.teacherRole.newOrganisation.address.country
  })}}
{% endset %}

{{ appSummaryCard({
  classes: "govuk-!-margin-bottom-9",
  titleText: "About their role",
  rows: [
    {
      key: {
        html: 'Start date'
      },
      value: {
        html: data.report.teacherRole['start-date'] | isoDateFromDateInput | date
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/start-date"
        }]
      }
    } if isEmployer,
    {
      key: {
        html: 'End date'
      },
      value: {
        html: data.report.teacherRole['end-date'] | isoDateFromDateInput | date
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/end-date"
        }]
      }
    } if isEmployer and data.report.teacherRole['still-employed'] == "No",
    {
      key: {
        html: 'How did they leave this job?'
      },
      value: {
        html: data.report.teacherRole['how-end-job']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/end-date"
        }]
      }
    } if isEmployer and data.report.teacherRole['still-employed'] == "No",
    {
      key: {
        html: 'Are they still employed in this job?'
      },
      value: {
        html: data.report.teacherRole['still-employed']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/end-date"
        }]
      }
    } if isEmployer,
    {
      key: {
        html: 'Job title'
      },
      value: {
        html: data.report.teacherRole['job-title']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/job-title"
        }]
      }
    } if data.report.teacherRole['job-title'],
    {
      key: {
        html: 'Do you know the name and address of the organisation where the alleged misconduct took place?'
      },
      value: {
        html: data.report.teacherRole.knowWhereTheyWorked
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/know-where-they-worked"
        }]
      }
    },
    {
      key: {
        html: 'Where they were employed at the time of the alleged misconduct'
      },
      value: {
        html: address
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/where-they-worked"
        }]
      }
    } if data.report.teacherRole.knowWhereTheyWorked == 'Yes',
    {
      key: {
        html: 'Description of the work carried out'
      },
      value: {
        html: data.report.teacherRole['duties'] | nl2br
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/school"
        }]
      }
    } if isPublic or data.report.teacherRole['how-tell-job'] == "describe",
    {
      key: {
        html: 'Main duties'
      },
      value: {
        html: '<a href="#">job-description.pdf</a>'
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/duties"
        }]
      }
    } if data.report.teacherRole['how-tell-job'] == "upload",
    {
      key: {
        html: 'Main duties'
      },
      value: {
        html: '<span class="govuk-tag govuk-tag--grey">Incomplete</span>'
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/duties"
        }]
      }
    } if data.report.teacherRole['how-tell-job'] == "later",
    {
      key: {
        html: 'Are they teaching somewhere else?'
      },
      value: {
        html: data.report.teacherRole['teaching-elsewhere']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/teaching-somewhere-else"
        }]
      }
    } if hasLeftJob,
    {
      key: {
        html: 'Do you know where they are teaching?'
      },
      value: {
        html: data.report.teacherRole['know-other-employer']
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/teaching-where-now"
        }]
      }
    } if hasLeftJob and data.report.teacherRole['teaching-elsewhere'] == "Yes",
    {
      key: {
        html: 'New employer'
      },
      value: {
        html: newOrgAddress
      },
      actions: {
        items: [{
          text: 'Change',
          href: "/report/teacher-role/teaching-where-now"
        }]
      }
    } if hasLeftJob and data.report.teacherRole['teaching-elsewhere'] == "Yes"
  ]
}) }}